---
import BaseLayout from "./BaseLayout.astro";
import { normalizeImagePath } from "../utils/content";

const { title, description, image, ogImage, ogType } = Astro.props;
const imagePath = normalizeImagePath(image?.path);
---

<BaseLayout title={title} description={description} ogImage={ogImage} ogType={ogType}>
  <div class="col-md-12">
    <div class="row">
      <div class="col">
        <h1>{title}</h1>
        {imagePath && (
          <img
            src={imagePath}
            alt={image?.alt ?? title}
            style="object-fit: cover; width: inherit; height: inherit; max-width: 100%; max-height: 400px"
          />
        )}
        <div class="post-content">
          <slot />
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  .post-content :global(img) {
    max-width: 100%;
    height: auto;
  }

  .post-content :global(.inline-photo) {
    width: min(280px, 44%);
    margin: 0.25rem 0 0.75rem;
  }

  .post-content :global(.inline-photo-right) {
    float: right;
    margin-left: 1rem;
  }

  .post-content :global(.inline-photo-left) {
    float: left;
    margin-right: 1rem;
  }

  .post-content :global(.inline-photo img) {
    width: 100%;
    border-radius: 0.25rem;
    display: block;
  }

  .post-content :global(.inline-photo figcaption) {
    font-size: 0.875rem;
    line-height: 1.3;
    margin-top: 0.35rem;
    color: #6c757d;
  }

  @media (max-width: 767px) {
    .post-content :global(.inline-photo),
    .post-content :global(.inline-photo-left),
    .post-content :global(.inline-photo-right) {
      float: none;
      width: 100%;
      margin-left: 0;
      margin-right: 0;
    }
  }
</style>
